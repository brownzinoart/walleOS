@import "tailwindcss";
@import "lenis/dist/lenis.css";

@theme {
  --color-terminal-bg: oklch(0.12 0.01 240);
  --color-terminal-fg: oklch(0.92 0.02 120);
  --color-terminal-accent: oklch(0.75 0.15 160);
  --color-terminal-muted: oklch(0.45 0.03 240);
  --font-mono: "JetBrains Mono", "Fira Code", "Courier New", monospace;
  --breakpoint-3xl: 96rem;
}

/* Terminal Theme Bridge - Maps terminal colors to desktop elements */
:root {
  --terminal-glow-sm: 0 0 10px color-mix(in oklch, var(--color-terminal-accent) 20%, transparent 80%);
  --terminal-glow-md: 0 0 20px color-mix(in oklch, var(--color-terminal-accent) 30%, transparent 70%);
  --terminal-glow-lg: 0 0 40px color-mix(in oklch, var(--color-terminal-accent) 40%, transparent 60%);
  --terminal-scanline-opacity: 0.06;
  --terminal-grid-opacity: 0.03;
}

/* Desktop Terminal Enhancements */
.classicyDesktop {
  /* Add subtle scanline effect over desktop */
  position: relative;
}

.classicyDesktop::before {
  content: "";
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    180deg,
    rgba(100, 200, 180, var(--terminal-scanline-opacity)),
    transparent 2px,
    transparent 4px
  );
  pointer-events: none;
  mix-blend-mode: screen;
  z-index: 9999;
}

/* Add subtle grid pattern to desktop background */
.classicyDesktop::after {
  content: "";
  position: fixed;
  inset: 0;
  background-image:
    linear-gradient(rgba(100, 200, 180, var(--terminal-grid-opacity)) 1px, transparent 1px),
    linear-gradient(90deg, rgba(100, 200, 180, var(--terminal-grid-opacity)) 1px, transparent 1px);
  background-size: 20px 20px;
  pointer-events: none;
  z-index: 1;
}

/* Active Window Glow */
.classicyWindowActive {
  filter: drop-shadow(var(--terminal-glow-md));
  transition: filter 0.3s ease;
}

/* Window Border Accent */
.classicyWindow {
  transition: filter 0.3s ease;
}

.classicyWindowInactive {
  filter: brightness(0.8) contrast(0.9);
}

/* Menu Bar Terminal Enhancement */
.classicyDesktopMenuBar {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5),
              inset 0 1px 0 rgba(100, 200, 180, 0.1);
}

/* Desktop Icon Terminal Effects */
.classicyDesktopIconActive,
.classicyDesktopIconActiveAndOpen {
  filter: drop-shadow(var(--terminal-glow-sm));
}

.classicyDesktopIconActive p,
.classicyDesktopIconActiveAndOpen p {
  background: color-mix(in oklch, var(--color-terminal-accent) 80%, transparent 20%) !important;
  color: var(--color-terminal-bg) !important;
  font-weight: 600;
  box-shadow: var(--terminal-glow-sm);
}

/* Tailwind Utility Compatibility
 * - Tailwind utilities work normally outside .classicyDesktop
 * - Inside .classicyDesktop, Classicy theme variables take precedence
 * - Terminal color utilities (bg-terminal-*, text-terminal-*) work everywhere
 * - Use data-lenis-prevent on scrollable desktop elements to prevent conflicts
 */

:root {
  color-scheme: dark;
}

body {
  @apply bg-terminal-bg text-terminal-fg font-mono antialiased;
  min-height: 100vh;
  position: relative;
  background-image: radial-gradient(circle at 20% 20%, color-mix(in oklch, var(--color-terminal-accent) 12%, transparent 88%) 0, transparent 45%),
    radial-gradient(circle at 80% 0%, color-mix(in oklch, var(--color-terminal-muted) 10%, transparent 90%) 0, transparent 55%);
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
      180deg,
      color-mix(in oklch, var(--color-terminal-muted) 6%, transparent 94%),
      transparent 2px,
      transparent 4px
    );
  opacity: 0.06;
  pointer-events: none;
  mix-blend-mode: screen;
}

html.lenis, html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

@keyframes blink {
  0%, 50% {
    opacity: 1;
  }
  51%, 100% {
    opacity: 0;
  }
}

.animate-blink {
  animation: blink 1s steps(1, end) infinite;
}

@media (prefers-reduced-motion: reduce) {
  .animate-blink {
    animation: none;
    opacity: 1;
  }

  html {
    scroll-behavior: auto !important;
  }
}

.terminal-button {
  @apply border-2 border-terminal-accent text-terminal-accent;
  @apply px-6 py-3 font-mono transition-all duration-300;
  @apply hover:bg-terminal-accent hover:text-terminal-bg;
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-terminal-accent focus-visible:ring-offset-2 focus-visible:ring-offset-terminal-bg;
}

.glow-accent {
  box-shadow: 0 0 20px color-mix(in oklch, var(--color-terminal-accent) 30%, transparent 70%);
}

.hover\:glow-accent:hover {
  box-shadow: 0 0 20px color-mix(in oklch, var(--color-terminal-accent) 30%, transparent 70%);
}

*:focus-visible {
  outline: 2px solid var(--color-terminal-accent);
  outline-offset: 2px;
}

.project-card {
  background: linear-gradient(
    135deg,
    var(--color-terminal-bg) 0%,
    color-mix(in oklch, var(--color-terminal-muted) 20%, var(--color-terminal-bg) 80%) 100%
  );
  @apply border-2 border-terminal-muted rounded-lg p-6 transition-all duration-300;
}

.project-card:hover {
  @apply border-terminal-accent;
}

.tech-badge {
  @apply inline-block rounded-full border border-terminal-accent/40 bg-terminal-accent/10 px-3 py-1 text-xs font-mono text-terminal-accent;
}

.expanded-card-backdrop {
  @apply fixed inset-0 bg-terminal-bg/90;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

.expanded-card {
  @apply fixed bg-terminal-bg border-2 border-terminal-accent rounded-xl shadow-2xl overflow-y-auto;
  box-shadow: 0 0 60px color-mix(in oklch, var(--color-terminal-accent) 25%, transparent 75%),
    0 20px 80px rgba(0, 0, 0, 0.6);
}

.expanded-card::-webkit-scrollbar {
  width: 8px;
}

.expanded-card::-webkit-scrollbar-track {
  background: var(--color-terminal-bg);
}

.expanded-card::-webkit-scrollbar-thumb {
  background: var(--color-terminal-muted);
  border-radius: 4px;
}

.expanded-card::-webkit-scrollbar-thumb:hover {
  background: var(--color-terminal-accent);
}

body.modal-open {
  overflow: hidden;
}

@media (prefers-reduced-motion: reduce) {
  .project-card,
  .expanded-card,
  .expanded-card-backdrop {
    transition: none !important;
  }
}
