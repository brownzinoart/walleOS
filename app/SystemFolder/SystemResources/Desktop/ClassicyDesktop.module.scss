@use 'sass:list';
@use '../../ControlPanels/AppearanceManager/styles/appearance';
@use '../../ControlPanels/AppearanceManager/styles/scrollbars';

.classicyDesktop {
  overflow: hidden;
  width: 100vw;
  height: 100vh;
  margin: 0;
  padding: 0;
  cursor: default;
  user-select: none;
  background-color: var(--desktop-background-color);
  background-image: var(--desktop-background-image);
  background-repeat: var(--desktop-background-repeat);
  background-position: var(--desktop-background-position);
  background-size: var(--desktop-background-size);
  // Terminal theme enhancements
  background-attachment: fixed;
  image-rendering: auto; // Override pixelation for smoother terminal aesthetic

  // Add subtle radial gradient overlay for depth
  &::before {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
        circle at 20% 20%,
        color-mix(in oklch, var(--color-theme-03) 8%, transparent 92%) 0,
        transparent 50%
      ),
      radial-gradient(
        circle at 80% 80%,
        color-mix(in oklch, var(--color-theme-04) 6%, transparent 94%) 0,
        transparent 50%
      );
    pointer-events: none;
    z-index: 0;
  }
  user-drag: none;
  @include appearance.no-select;

  &,
  & * {
    @include scrollbars.scrollbars;
    @include scrollbars.scrollbars-themed;
    accent-color: var(--color-theme-04);

    &:focus-visible {
      outline-color: var(--color-outline);
      outline-width: 2px;
      outline-offset: 2px;
      box-shadow: 0 0 0 2px var(--color-outline),
        0 0 10px color-mix(in oklch, var(--color-outline) 40%, transparent 60%);
    }

    &::marker {
      color: var(--color-theme-02);
    }

    &:is( ::-webkit-calendar-picker-indicator,
      ::-webkit-clear-button,
      ::-webkit-inner-spin-button,
      ::-webkit-outer-spin-button) {
      color: var(--color-theme-02);
    }
  }

  *::selection {
    background: var(--color-theme-03) !important; // Uses terminal accent from theme
    color: var(--color-window-document) !important;
    text-shadow: 0 0 8px color-mix(in oklch, var(--color-theme-03) 50%, transparent 50%);
  }
}

.classicyDesktopSelect {
  position: absolute !important;
  border: var(--window-border-size) solid var(--color-theme-03);
  outline: var(--window-border-size) solid var(--color-theme-03);
  background: color-mix(in oklch, var(--color-theme-03) 10%, transparent 90%);
  box-shadow: 0 0 10px color-mix(in oklch, var(--color-theme-03) 30%, transparent 70%),
    inset 0 0 20px color-mix(in oklch, var(--color-theme-03) 15%, transparent 85%);
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}
