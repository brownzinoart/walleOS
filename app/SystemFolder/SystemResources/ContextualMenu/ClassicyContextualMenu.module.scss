@use '../../ControlPanels/AppearanceManager/styles/appearance';

@keyframes contextMenuFadeIn {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-4px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes contextMenuGlow {
  0%, 100% {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6),
      0 0 20px color-mix(in oklch, var(--color-theme-03) 20%, transparent 80%),
      inset 0 1px 0 color-mix(in oklch, var(--color-system-05) 80%, var(--color-theme-03) 20%);
  }
  50% {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6),
      0 0 30px color-mix(in oklch, var(--color-theme-03) 30%, transparent 70%),
      inset 0 1px 0 color-mix(in oklch, var(--color-system-05) 80%, var(--color-theme-03) 20%);
  }
}

.classicyContextMenuWrapper {
  position: fixed;
  z-index: 900;
  display: inline-block;
  margin: 0;

  @include appearance.platinumWindowBoxShadow;
  padding: 0;
  border-radius: 4px;
  overflow: hidden;
  background: linear-gradient(
    135deg,
    color-mix(in oklch, var(--color-system-02) 100%, transparent 0%) 0%,
    color-mix(in oklch, var(--color-system-02) 95%, var(--color-theme-07) 5%) 100%
  );
  backdrop-filter: blur(12px) saturate(1.2);
  -webkit-backdrop-filter: blur(12px) saturate(1.2);
  border: 1px solid color-mix(in oklch, var(--color-theme-03) 40%, var(--color-black) 60%);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6),
    0 0 20px color-mix(in oklch, var(--color-theme-03) 20%, transparent 80%),
    inset 0 1px 0 color-mix(in oklch, var(--color-system-05) 80%, var(--color-theme-03) 20%),
    inset 0 -1px 0 color-mix(in oklch, var(--color-system-07) 80%, var(--color-theme-03) 20%);
  animation: contextMenuFadeIn 0.15s ease-out, contextMenuGlow 3s ease-in-out infinite;
}

.classicyContextMenuWrapper ul {
  margin: 0;
  padding: calc(var(--window-border-size));
  list-style: none;
}

.classicyContextMenuWrapper li {
  color: var(--color-white);
  padding: 6px 12px;
  transition: all 0.15s ease;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
  cursor: pointer;
}

.classicyContextMenuWrapper li:hover {
  background: linear-gradient(
    90deg,
    color-mix(in oklch, var(--color-theme-03) 85%, var(--color-system-02) 15%) 0%,
    color-mix(in oklch, var(--color-theme-03) 75%, var(--color-system-02) 25%) 100%
  );
  color: var(--color-window-document);
  box-shadow: inset 0 0 20px color-mix(in oklch, var(--color-theme-03) 25%, transparent 75%);
  text-shadow: 0 0 10px color-mix(in oklch, var(--color-theme-03) 35%, transparent 65%),
    0 1px 2px rgba(0, 0, 0, 0.8);
  transform: translateX(2px);
}

.classicyContextMenuWrapper li:active {
  background: linear-gradient(
    90deg,
    color-mix(in oklch, var(--color-theme-04) 90%, var(--color-system-02) 10%) 0%,
    color-mix(in oklch, var(--color-theme-04) 85%, var(--color-system-02) 15%) 100%
  );
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.5);
  transform: translateX(1px);
}

.classicyContextMenuWrapper img,
.classicyContextMenuWrapper svg {
  filter: drop-shadow(0 0 4px color-mix(in oklch, var(--color-theme-03) 15%, transparent 85%));
  transition: filter 0.15s ease;
}

.classicyContextMenuWrapper li:hover img,
.classicyContextMenuWrapper li:hover svg {
  filter: drop-shadow(0 0 8px color-mix(in oklch, var(--color-theme-03) 30%, transparent 70%));
}

.classicyContextMenuWrapper li[class*='classicyMenuItemDisabled'] {
  color: color-mix(in oklch, var(--color-system-05) 50%, var(--color-theme-07) 50%);
  opacity: 0.4;
  cursor: not-allowed;
  text-shadow: none;
  transform: none;
}

.classicyContextMenuWrapper li[class*='classicyMenuItemDisabled']:hover {
  background: transparent;
  box-shadow: none;
  transform: none;
}

.classicyContextMenuWrapper li[class*='classicyMenuItemDisabled'] img,
.classicyContextMenuWrapper li[class*='classicyMenuItemDisabled'] svg {
  opacity: 0.4;
  filter: grayscale(1);
}
